# ROS Message Converter

Utility for loading and tracking message types and definitions from RosLibJs or Ros Bags and converting binary-form messages to js objects.

<!--{package-dependencies ./package.json}-->

# Use

Converting messages manually.

```js
const ros = new ROSLIB.ROS( { ... } );
const converter = new RosMsgConverter();
await converter.initFromRos( ros );

const topic = new ROSLIB.Topic( {
    ros: ros,
    name: '/tf',
    type: converter.getTopicType( '/tf' ),
    compression: 'cbor-raw',
} );
topic.subscribe( function( raw ) {

    const msg = converter.convertFromTopic( this.name, raw.data );
    // data!

} );
```

Or using a "SmartTopic" that infers the message type, uses cbor-raw compression, and autoconverts the content.

```js
const topic = new SmartTopic( {
    ros: ros,
    converter: converter,
    name: '/tf'
} );
topic.subscribe( msg => {

    // data!

} );
```

<!-- START_AUTOGENERATED_DOCS -->
## RosMsgConverter

Class for tracking ROS Topic, types, and definitions and converting binary "cbor-raw"
representations to javascript objects.

### ready<a name="RosMsgConverter#ready"></a>

```js
ready : Boolean
```


Boolean indicating whether or not the instance has been
initialized and ready to use.


### types<a name="RosMsgConverter#types"></a>

```js
types : Object
```


A map of topic name to the name of the type.


### initFromRos<a name="RosMsgConverter#initFromRos"></a>

```js
initFromRos( handle : ROSLIB.ROS ) : void
```

Initialializes the types asynchronously using a ROSLIB.ROS instance by fetching the
topics and raw message definitions message.

### initFromBags<a name="RosMsgConverter#initFromBags"></a>

```js
initFromBags( handles : ...Bag ) : void
```

Takes a list of initialized rosbag package "Bag" instances to initializes the class with.

### hasType<a name="RosMsgConverter#hasType"></a>

```js
hasType( type : string ) : Boolean
```

Returns whether the converter can handle the given type.

### convertFromType<a name="RosMsgConverter#convertFromType"></a>

```js
convertFromType( type : string, data : ArrayBuffer ) : Object
```

Converts the binary data to a javascript object using the reader of the given type.

### convertFromTopic<a name="RosMsgConverter#convertFromTopic"></a>

```js
convertFromTopic( topic : string, data : ArrayBuffer ) : Object
```

Converts the binary data to a javascript object using the reader of the type of the given topic.

### getTopicType<a name="RosMsgConverter#getTopicType"></a>

```js
getTopicType( topic : string ) : string
```

Returns the type associated with the given topic.

## SmartTopic

An extension of the ROSLIB.Topic that takes a [RosMsgConverter](#RosMsgConverter) in the options
(as the "converter" option), uses "cbor-raw" compression by default, converts the result using
the provided converter, and infers the topic type based on the topic name.

_extends Topic_

### options<a name="SmartTopic#options"></a>

```js
options : null
```




<!-- END_AUTOGENERATED_DOCS -->
